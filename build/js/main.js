"use strict";

var startGameBtn = document.querySelector('.main__game-machine-btn');
var startText = document.querySelector(".start-text");
var hookWrap = document.querySelector('.hook-wrap'); // батьківський елемент в якому знаходиться хук
var hookFastening = document.querySelector('.hook-fastering'); // елемент кріплення хука до gamebody

var gameBody = document.querySelector(".game-body"); // елемент до якого кріпиться хук і лінія на якій він спускається до монеток
var result = document.querySelector(".result"); // таблиця результатів гри
var coins = document.querySelector(".coins"); // батьківський елемент монеток
var gameOver = document.querySelector(".gameOver"); // екран який відображається по закінченню гри

var popupBtn = document.querySelector(".gameOver__info");
var popupWindow = document.querySelector(".popup");
var popupClose = document.querySelector(".popup__close");
var FS = document.querySelector(".FS");
var elemsInsideFS = FS.querySelectorAll("span"); //span елементи в які записується результат FS
var RFB = document.querySelector(".RFB");
var elemsInsideRFB = RFB.querySelectorAll("span"); //span елементи в які записується результат RFB
var EUR = document.querySelector(".EUR");
var elemsInsideEUR = EUR.querySelectorAll("span"); //span елементи в які записується результат EUR
var coin3 = document.querySelector(".coin3"); // монетка яка буде спіймана першою
var coin4 = document.querySelector(".coin4"); // монетка яка буде спіймана другою
var frameCounter = 0; // потрібен для відстежування ключових точок анімації
// let popupHandler = 0 // відстежує відкритий попап чи ні
startGameBtn.addEventListener("click", function () {
  startText.style.display = "none";
  hookWrap.classList.add("hook-move-horizontal"); // запуск гри
});

coin3.addEventListener("animationend", function () {
  // відстежуємо момент закінчкення анімації першого монетки для запуску циклу анімацій другої монетки
  frameCounter++; //збільшує frameCounter кожного разу коли відбувається анімація першої монетки
  // console.log(`coin ${frameCounter}`)

  //прибираємо стилі анімації першого хука
  hookWrap.classList.remove("hook-catch1-up");
  hookFastening.classList.remove("hook-fastering-catch1-up");
  hookWrap.classList.remove("hook-catch1-down");
  hookFastening.classList.remove("hook-fastering-catch1-down");

  // прибираємо класи відпрацьованої анімації руху та додаємо анімацію зникнення монетки
  coin3.classList.remove("coin-catch");
  coin3.classList.add("coin-disappearance");
  coin3.style.opacity = "0";

  // анімація оновлення FS на таблиці запускається після завершення анімації зникнення першої монетки
  if (frameCounter === 7) {
    elemsInsideFS.forEach(function (item, i) {
      if (i === 0) {
        item.style.opacity = "0";
        item.textContent = '1';
        setTimeout(function () {
          item.style.opacity = "1";
        }, 500);
      }
      if (i === 1) {
        setTimeout(function () {
          item.style.opacity = "0";
          item.textContent = '5';
          setTimeout(function () {
            item.style.opacity = "1";
            hookWrap.classList.add("hook-move-horizontal2"); // ініціюємо анімацію руху до другої монетки
          }, 500);
        }, 200);
      }
    });
  }
});
coin4.addEventListener("animationend", function () {
  frameCounter++; //збільшує frameCounter кожного разу коли відбувається анімація другої монетки
  // console.log(`coin ${frameCounter}`)

  //прибираємо стилі анімації другого хука
  hookWrap.classList.remove("hook-catch2-up");
  hookFastening.classList.remove("hook-fastering-catch2-up");
  hookWrap.classList.remove("hook-catch2-down");
  hookFastening.classList.remove("hook-fastering-catch2-down");

  // прибираємо класи відпрацьованої анімації руху та додаємо анімацію зникнення другої монетки
  coin4.classList.remove("coin-catch");
  coin4.classList.add("coin-disappearance");
  coin4.style.opacity = "0";

  // анімація оновлення RFB та EUR на таблиці запускається після завершення анімації зникнення другої монетки
  if (frameCounter === 14) {
    elemsInsideRFB.forEach(function (item, i) {
      if (i === 0) {
        item.style.opacity = "0";
        item.textContent = '1';
        setTimeout(function () {
          item.style.opacity = "1";
        }, 500);
      }
      if (i === 1) {
        setTimeout(function () {
          item.style.opacity = "0";
          item.textContent = '0';
          setTimeout(function () {
            item.style.opacity = "1";
          }, 500);
        }, 200);
      }
    });
    elemsInsideEUR.forEach(function (item, i) {
      if (i === 0) {
        item.style.opacity = "0";
        item.textContent = '1';
        setTimeout(function () {
          item.style.opacity = "1";
        }, 500);
      }
      if (i === 1) {
        setTimeout(function () {
          item.style.opacity = "0";
          item.textContent = '0';
          setTimeout(function () {
            item.style.opacity = "1";
            // приховуємо елементи гри і відображаємо екран закінчення
            setTimeout(function () {
              gameBody.style.opacity = "0";
              result.style.opacity = "0";
              coins.style.opacity = "0";
              gameOver.style.opacity = "1";
              gameOver.style.zIndex = "10";
              //логіка кнопки відкриття попапу, додається після відображення екрану закінчення гри
              popupBtn.addEventListener("click", function () {
                document.querySelector("body").style.overflowY = "hidden";
                popupWindow.style.opacity = "1";
                popupWindow.style.zIndex = "100";
                // popupHandler++
              });
              //логіка кнопки закриття попапу, додається після відображення екрану закінчення гри
              popupClose.addEventListener("click", function () {
                console.log("close");
                document.querySelector("body").style.overflowY = "visible";
                popupWindow.style.opacity = "0";
                popupWindow.style.zIndex = '-100';
                // popupHandler--
              });
              // document.addEventListener("click", (e) =>{
              //     if(e.target !== popupWindow && popupHandler === 1){
              //         console.log("close")
              //         document.querySelector("body").style.overflowY = "visible"
              //         popupWindow.style.opacity = "0"
              //         popupWindow.style.zIndex = '-100'
              //     }
              // })
            }, 500);
          }, 500);
        }, 200);
      }
    });
  }
});
hookWrap.addEventListener("animationend", function () {
  frameCounter++; // збільшує frameCounter кожного разу коли відбувається анімація хука
  // console.log(frameCounter)
  if (frameCounter === 1) {
    //фіксація хука перед першою монетою
    hookWrap.classList.add("hook-position-catch1");
  }
  if (frameCounter === 3) {
    // логіка руху першої монетки після того як її хукнули
    coin3.classList.add("coin-catch");
    hookWrap.classList.add("hook-catch1-up");
    hookFastening.classList.add("hook-fastering-catch1-up");
  }
  if (frameCounter < 7) {
    // логіка анімації руху хука до першої монетки
    hookWrap.classList.remove("hook-move-horizontal");
    hookWrap.classList.add("hook-catch1-down");
    hookFastening.classList.add("hook-fastering-catch1-down");
  }
  if (frameCounter === 8) {
    // логіка анімації руху хука до другої монетки
    hookWrap.classList.remove("hook-move-horizontal2");
    hookWrap.classList.add("hook-position-catch2");
    hookWrap.classList.add("hook-catch2-down");
    hookFastening.classList.add("hook-fastering-catch2-down");
  }
  if (frameCounter === 10) {
    // логіка руху другої монетки після того як її хукнули
    hookWrap.classList.add("hook-catch2-up");
    hookFastening.classList.add("hook-fastering-catch2-up");
    coin4.classList.add("coin-catch");
  }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsic3RhcnRHYW1lQnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic3RhcnRUZXh0IiwiaG9va1dyYXAiLCJob29rRmFzdGVuaW5nIiwiZ2FtZUJvZHkiLCJyZXN1bHQiLCJjb2lucyIsImdhbWVPdmVyIiwicG9wdXBCdG4iLCJwb3B1cFdpbmRvdyIsInBvcHVwQ2xvc2UiLCJGUyIsImVsZW1zSW5zaWRlRlMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiUkZCIiwiZWxlbXNJbnNpZGVSRkIiLCJFVVIiLCJlbGVtc0luc2lkZUVVUiIsImNvaW4zIiwiY29pbjQiLCJmcmFtZUNvdW50ZXIiLCJhZGRFdmVudExpc3RlbmVyIiwic3R5bGUiLCJkaXNwbGF5IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwib3BhY2l0eSIsImZvckVhY2giLCJpdGVtIiwiaSIsInRleHRDb250ZW50Iiwic2V0VGltZW91dCIsInpJbmRleCIsIm92ZXJmbG93WSIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTUEsWUFBWSxHQUFHQyxRQUFRLENBQUNDLGFBQWEsQ0FBQyx5QkFBeUIsQ0FBQztBQUN0RSxJQUFNQyxTQUFTLEdBQUdGLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLGFBQWEsQ0FBQztBQUV2RCxJQUFNRSxRQUFRLEdBQUdILFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7QUFDdkQsSUFBTUcsYUFBYSxHQUFHSixRQUFRLENBQUNDLGFBQWEsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7O0FBRWpFLElBQU1JLFFBQVEsR0FBR0wsUUFBUSxDQUFDQyxhQUFhLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztBQUN2RCxJQUFNSyxNQUFNLEdBQUdOLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7QUFDbEQsSUFBTU0sS0FBSyxHQUFHUCxRQUFRLENBQUNDLGFBQWEs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RUFDckM7QUFDSixDQUFDLENBQUMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHN0YXJ0R2FtZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluX19nYW1lLW1hY2hpbmUtYnRuJyk7XG5jb25zdCBzdGFydFRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN0YXJ0LXRleHRcIik7XG5cbmNvbnN0IGhvb2tXcmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvb2std3JhcCcpOyAvLyDQsdCw0YLRjNC60ZbQstGB0YzQutC40Lkg0LXQu9C10LzQtdC90YIg0LIg0Y/QutC+0LzRgyDQt9C90LDRhdC+0LTQuNGC0YzRgdGPINGF0YPQulxuY29uc3QgaG9va0Zhc3RlbmluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ob29rLWZhc3RlcmluZycpOyAvLyDQtdC70LXQvNC10L3RgiDQutGA0ZbQv9C70LXQvdC90Y8g0YXRg9C60LAg0LTQviBnYW1lYm9keVxuXG5jb25zdCBnYW1lQm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FtZS1ib2R5XCIpOyAvLyDQtdC70LXQvNC10L3RgiDQtNC+INGP0LrQvtCz0L4g0LrRgNGW0L/QuNGC0YzRgdGPINGF0YPQuiDRliDQu9GW0L3RltGPINC90LAg0Y/QutGW0Lkg0LLRltC9INGB0L/Rg9GB0LrQsNGU0YLRjNGB0Y8g0LTQviDQvNC+0L3QtdGC0L7QulxuY29uc3QgcmVzdWx0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXN1bHRcIik7IC8vINGC0LDQsdC70LjRhtGPINGA0LXQt9GD0LvRjNGC0LDRgtGW0LIg0LPRgNC4XG5jb25zdCBjb2lucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29pbnNcIikgLy8g0LHQsNGC0YzQutGW0LLRgdGM0LrQuNC5INC10LvQtdC80LXQvdGCINC80L7QvdC10YLQvtC6XG5jb25zdCBnYW1lT3ZlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FtZU92ZXJcIik7IC8vINC10LrRgNCw0L0g0Y/QutC40Lkg0LLRltC00L7QsdGA0LDQttCw0ZTRgtGM0YHRjyDQv9C+INC30LDQutGW0L3Rh9C10L3QvdGOINCz0YDQuFxuXG5jb25zdCBwb3B1cEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FtZU92ZXJfX2luZm9cIik7XG5jb25zdCBwb3B1cFdpbmRvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBcIilcbmNvbnN0IHBvcHVwQ2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZVwiKTtcblxuY29uc3QgRlMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkZTXCIpXG5jb25zdCBlbGVtc0luc2lkZUZTID0gRlMucXVlcnlTZWxlY3RvckFsbChcInNwYW5cIikgLy9zcGFuINC10LvQtdC80LXQvdGC0Lgg0LIg0Y/QutGWINC30LDQv9C40YHRg9GU0YLRjNGB0Y8g0YDQtdC30YPQu9GM0YLQsNGCIEZTXG5jb25zdCBSRkIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLlJGQlwiKVxuY29uc3QgZWxlbXNJbnNpZGVSRkIgPSBSRkIucXVlcnlTZWxlY3RvckFsbChcInNwYW5cIikgIC8vc3BhbiDQtdC70LXQvNC10L3RgtC4INCyINGP0LrRliDQt9Cw0L/QuNGB0YPRlNGC0YzRgdGPINGA0LXQt9GD0LvRjNGC0LDRgiBSRkJcbmNvbnN0IEVVUiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuRVVSXCIpXG5jb25zdCBlbGVtc0luc2lkZUVVUiA9IEVVUi5xdWVyeVNlbGVjdG9yQWxsKFwic3BhblwiKSAgLy9zcGFuINC10LvQtdC80LXQvdGC0Lgg0LIg0Y/QutGWINC30LDQv9C40YHRg9GU0YLRjNGB0Y8g0YDQtdC30YPQu9GM0YLQsNGCIEVVUlxuY29uc3QgY29pbjMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvaW4zXCIpIC8vINC80L7QvdC10YLQutCwINGP0LrQsCDQsdGD0LTQtSDRgdC/0ZbQudC80LDQvdCwINC/0LXRgNGI0L7RjlxuY29uc3QgY29pbjQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvaW40XCIpIC8vINC80L7QvdC10YLQutCwINGP0LrQsCDQsdGD0LTQtSDRgdC/0ZbQudC80LDQvdCwINC00YDRg9Cz0L7RjlxubGV0IGZyYW1lQ291bnRlciA9IDAgLy8g0L/QvtGC0YDRltCx0LXQvSDQtNC70Y8g0LLRltC00YHRgtC10LbRg9Cy0LDQvdC90Y8g0LrQu9GO0YfQvtCy0LjRhSDRgtC+0YfQvtC6INCw0L3RltC80LDRhtGW0Zdcbi8vIGxldCBwb3B1cEhhbmRsZXIgPSAwIC8vINCy0ZbQtNGB0YLQtdC20YPRlCDQstGW0LTQutGA0LjRgtC40Lkg0L/QvtC/0LDQvyDRh9C4INC90ZZcbnN0YXJ0R2FtZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIHN0YXJ0VGV4dC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcbiAgICBob29rV3JhcC5jbGFzc0xpc3QuYWRkKFwiaG9vay1tb3ZlLWhvcml6b250YWxcIik7IC8vINC30LDQv9GD0YHQuiDQs9GA0Lhcbn0pO1xuXG5jb2luMy5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsICgpID0+eyAvLyDQstGW0LTRgdGC0LXQttGD0ZTQvNC+INC80L7QvNC10L3RgiDQt9Cw0LrRltC90YfQutC10L3QvdGPINCw0L3RltC80LDRhtGW0Zcg0L/QtdGA0YjQvtCz0L4g0LzQvtC90LXRgtC60Lgg0LTQu9GPINC30LDQv9GD0YHQutGDINGG0LjQutC70YMg0LDQvdGW0LzQsNGG0ZbQuSDQtNGA0YPQs9C+0Zcg0LzQvtC90LXRgtC60LhcbiAgICBmcmFtZUNvdW50ZXIrKyAvL9C30LHRltC70YzRiNGD0ZQgZnJhbWVDb3VudGVyINC60L7QttC90L7Qs9C+INGA0LDQt9GDINC60L7Qu9C4INCy0ZbQtNCx0YPQstCw0ZTRgtGM0YHRjyDQsNC90ZbQvNCw0YbRltGPINC/0LXRgNGI0L7RlyDQvNC+0L3QtdGC0LrQuFxuICAgIC8vIGNvbnNvbGUubG9nKGBjb2luICR7ZnJhbWVDb3VudGVyfWApXG5cbiAgICAvL9C/0YDQuNCx0LjRgNCw0ZTQvNC+INGB0YLQuNC70ZYg0LDQvdGW0LzQsNGG0ZbRlyDQv9C10YDRiNC+0LPQviDRhdGD0LrQsFxuICAgIGhvb2tXcmFwLmNsYXNzTGlzdC5yZW1vdmUoXCJob29rLWNhdGNoMS11cFwiKTtcbiAgICBob29rRmFzdGVuaW5nLmNsYXNzTGlzdC5yZW1vdmUoXCJob29rLWZhc3RlcmluZy1jYXRjaDEtdXBcIik7XG4gICAgaG9va1dyYXAuY2xhc3NMaXN0LnJlbW92ZShcImhvb2stY2F0Y2gxLWRvd25cIik7XG4gICAgaG9va0Zhc3RlbmluZy5jbGFzc0xpc3QucmVtb3ZlKFwiaG9vay1mYXN0ZXJpbmctY2F0Y2gxLWRvd25cIik7XG5cbiAgICAvLyDQv9GA0LjQsdC40YDQsNGU0LzQviDQutC70LDRgdC4INCy0ZbQtNC/0YDQsNGG0YzQvtCy0LDQvdC+0Zcg0LDQvdGW0LzQsNGG0ZbRlyDRgNGD0YXRgyDRgtCwINC00L7QtNCw0ZTQvNC+INCw0L3RltC80LDRhtGW0Y4g0LfQvdC40LrQvdC10L3QvdGPINC80L7QvdC10YLQutC4XG4gICAgY29pbjMuY2xhc3NMaXN0LnJlbW92ZShcImNvaW4tY2F0Y2hcIilcbiAgICBjb2luMy5jbGFzc0xpc3QuYWRkKFwiY29pbi1kaXNhcHBlYXJhbmNlXCIpXG4gICAgY29pbjMuc3R5bGUub3BhY2l0eSA9IFwiMFwiXG5cbiAgICAvLyDQsNC90ZbQvNCw0YbRltGPINC+0L3QvtCy0LvQtdC90L3RjyBGUyDQvdCwINGC0LDQsdC70LjRhtGWINC30LDQv9GD0YHQutCw0ZTRgtGM0YHRjyDQv9GW0YHQu9GPINC30LDQstC10YDRiNC10L3QvdGPINCw0L3RltC80LDRhtGW0Zcg0LfQvdC40LrQvdC10L3QvdGPINC/0LXRgNGI0L7RlyDQvNC+0L3QtdGC0LrQuFxuICAgIGlmKGZyYW1lQ291bnRlciA9PT0gNyl7XG4gICAgICAgIGVsZW1zSW5zaWRlRlMuZm9yRWFjaCggKGl0ZW0sIGkpICA9PiB7XG4gICAgICAgICAgICBpZiggaSA9PT0gMCl7XG4gICAgICAgICAgICAgICAgaXRlbS5zdHlsZS5vcGFjaXR5ID0gXCIwXCI7XG4gICAgICAgICAgICAgICAgaXRlbS50ZXh0Q29udGVudCA9ICcxJztcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+e2l0ZW0uc3R5bGUub3BhY2l0eSA9IFwiMVwiO30sIDUwMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpID09PSAxKXtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS50ZXh0Q29udGVudCA9ICc1JztcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLm9wYWNpdHkgPSBcIjFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob29rV3JhcC5jbGFzc0xpc3QuYWRkKFwiaG9vay1tb3ZlLWhvcml6b250YWwyXCIpOyAvLyDRltC90ZbRhtGW0Y7RlNC80L4g0LDQvdGW0LzQsNGG0ZbRjiDRgNGD0YXRgyDQtNC+INC00YDRg9Cz0L7RlyDQvNC+0L3QtdGC0LrQuFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKVxuICAgICAgICAgICAgICAgIH0sIDIwMClcblxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbn0pXG5jb2luNC5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsICgpPT57XG4gICAgZnJhbWVDb3VudGVyKysgLy/Qt9Cx0ZbQu9GM0YjRg9GUIGZyYW1lQ291bnRlciDQutC+0LbQvdC+0LPQviDRgNCw0LfRgyDQutC+0LvQuCDQstGW0LTQsdGD0LLQsNGU0YLRjNGB0Y8g0LDQvdGW0LzQsNGG0ZbRjyDQtNGA0YPQs9C+0Zcg0LzQvtC90LXRgtC60LhcbiAgICAvLyBjb25zb2xlLmxvZyhgY29pbiAke2ZyYW1lQ291bnRlcn1gKVxuXG4gICAgLy/Qv9GA0LjQsdC40YDQsNGU0LzQviDRgdGC0LjQu9GWINCw0L3RltC80LDRhtGW0Zcg0LTRgNGD0LPQvtCz0L4g0YXRg9C60LBcbiAgICBob29rV3JhcC5jbGFzc0xpc3QucmVtb3ZlKFwiaG9vay1jYXRjaDItdXBcIik7XG4gICAgaG9va0Zhc3RlbmluZy5jbGFzc0xpc3QucmVtb3ZlKFwiaG9vay1mYXN0ZXJpbmctY2F0Y2gyLXVwXCIpO1xuICAgIGhvb2tXcmFwLmNsYXNzTGlzdC5yZW1vdmUoXCJob29rLWNhdGNoMi1kb3duXCIpO1xuICAgIGhvb2tGYXN0ZW5pbmcuY2xhc3NMaXN0LnJlbW92ZShcImhvb2stZmFzdGVyaW5nLWNhdGNoMi1kb3duXCIpO1xuXG4gICAgLy8g0L/RgNC40LHQuNGA0LDRlNC80L4g0LrQu9Cw0YHQuCDQstGW0LTQv9GA0LDRhtGM0L7QstCw0L3QvtGXINCw0L3RltC80LDRhtGW0Zcg0YDRg9GF0YMg0YLQsCDQtNC+0LTQsNGU0LzQviDQsNC90ZbQvNCw0YbRltGOINC30L3QuNC60L3QtdC90L3RjyDQtNGA0YPQs9C+0Zcg0LzQvtC90LXRgtC60LhcbiAgICBjb2luNC5jbGFzc0xpc3QucmVtb3ZlKFwiY29pbi1jYXRjaFwiKVxuICAgIGNvaW40LmNsYXNzTGlzdC5hZGQoXCJjb2luLWRpc2FwcGVhcmFuY2VcIilcbiAgICBjb2luNC5zdHlsZS5vcGFjaXR5ID0gXCIwXCJcblxuICAgIC8vINCw0L3RltC80LDRhtGW0Y8g0L7QvdC+0LLQu9C10L3QvdGPIFJGQiDRgtCwIEVVUiDQvdCwINGC0LDQsdC70LjRhtGWINC30LDQv9GD0YHQutCw0ZTRgtGM0YHRjyDQv9GW0YHQu9GPINC30LDQstC10YDRiNC10L3QvdGPINCw0L3RltC80LDRhtGW0Zcg0LfQvdC40LrQvdC10L3QvdGPINC00YDRg9Cz0L7RlyDQvNC+0L3QtdGC0LrQuFxuICAgIGlmKGZyYW1lQ291bnRlciA9PT0gMTQpe1xuICAgICAgICBlbGVtc0luc2lkZVJGQi5mb3JFYWNoKCAoaXRlbSwgaSkgID0+IHtcbiAgICAgICAgICAgIGlmKCBpID09PSAwKXtcbiAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcbiAgICAgICAgICAgICAgICBpdGVtLnRleHRDb250ZW50ID0gJzEnO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT57aXRlbS5zdHlsZS5vcGFjaXR5ID0gXCIxXCI7fSwgNTAwKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGkgPT09IDEpe1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnRleHRDb250ZW50ID0gJzAnO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zdHlsZS5vcGFjaXR5ID0gXCIxXCI7XG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMClcbiAgICAgICAgICAgICAgICB9LCAyMDApXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGVsZW1zSW5zaWRlRVVSLmZvckVhY2goIChpdGVtLCBpKSAgPT4ge1xuICAgICAgICAgICAgaWYoIGkgPT09IDApe1xuICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuICAgICAgICAgICAgICAgIGl0ZW0udGV4dENvbnRlbnQgPSAnMSc7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PntpdGVtLnN0eWxlLm9wYWNpdHkgPSBcIjFcIjt9LCA1MDApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaSA9PT0gMSl7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PntcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5zdHlsZS5vcGFjaXR5ID0gXCIwXCI7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udGV4dENvbnRlbnQgPSAnMCc7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLm9wYWNpdHkgPSBcIjFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vINC/0YDQuNGF0L7QstGD0ZTQvNC+INC10LvQtdC80LXQvdGC0Lgg0LPRgNC4INGWINCy0ZbQtNC+0LHRgNCw0LbQsNGU0LzQviDQtdC60YDQsNC9INC30LDQutGW0L3Rh9C10L3QvdGPXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVCb2R5LnN0eWxlLm9wYWNpdHkgPSBcIjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdHlsZS5vcGFjaXR5ID0gXCIwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2lucy5zdHlsZS5vcGFjaXR5ID0gXCIwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lT3Zlci5zdHlsZS5vcGFjaXR5ID0gXCIxXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lT3Zlci5zdHlsZS56SW5kZXggPSBcIjEwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL9C70L7Qs9GW0LrQsCDQutC90L7Qv9C60Lgg0LLRltC00LrRgNC40YLRgtGPINC/0L7Qv9Cw0L/Rgywg0LTQvtC00LDRlNGC0YzRgdGPINC/0ZbRgdC70Y8g0LLRltC00L7QsdGA0LDQttC10L3QvdGPINC10LrRgNCw0L3RgyDQt9Cw0LrRltC90YfQtdC90L3RjyDQs9GA0LhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpLnN0eWxlLm92ZXJmbG93WSA9IFwiaGlkZGVuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBXaW5kb3cuc3R5bGUub3BhY2l0eSA9IFwiMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwV2luZG93LnN0eWxlLnpJbmRleCA9IFwiMTAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9wdXBIYW5kbGVyKytcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v0LvQvtCz0ZbQutCwINC60L3QvtC/0LrQuCDQt9Cw0LrRgNC40YLRgtGPINC/0L7Qv9Cw0L/Rgywg0LTQvtC00LDRlNGC0YzRgdGPINC/0ZbRgdC70Y8g0LLRltC00L7QsdGA0LDQttC10L3QvdGPINC10LrRgNCw0L3RgyDQt9Cw0LrRltC90YfQtdC90L3RjyDQs9GA0LhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cENsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjbG9zZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKS5zdHlsZS5vdmVyZmxvd1kgPSBcInZpc2libGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cFdpbmRvdy5zdHlsZS5vcGFjaXR5ID0gXCIwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBXaW5kb3cuc3R5bGUuekluZGV4ID0gJy0xMDAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvcHVwSGFuZGxlci0tXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBpZihlLnRhcmdldCAhPT0gcG9wdXBXaW5kb3cgJiYgcG9wdXBIYW5kbGVyID09PSAxKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKFwiY2xvc2VcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpLnN0eWxlLm92ZXJmbG93WSA9IFwidmlzaWJsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBwb3B1cFdpbmRvdy5zdHlsZS5vcGFjaXR5ID0gXCIwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHBvcHVwV2luZG93LnN0eWxlLnpJbmRleCA9ICctMTAwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMClcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwKVxuICAgICAgICAgICAgICAgIH0sIDIwMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59KVxuaG9va1dyYXAuYWRkRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbmVuZFwiLCAoKSA9PiB7XG4gICAgZnJhbWVDb3VudGVyKysgLy8g0LfQsdGW0LvRjNGI0YPRlCBmcmFtZUNvdW50ZXIg0LrQvtC20L3QvtCz0L4g0YDQsNC30YMg0LrQvtC70Lgg0LLRltC00LHRg9Cy0LDRlNGC0YzRgdGPINCw0L3RltC80LDRhtGW0Y8g0YXRg9C60LBcbiAgICAvLyBjb25zb2xlLmxvZyhmcmFtZUNvdW50ZXIpXG4gICAgaWYoZnJhbWVDb3VudGVyID09PSAxKXsgLy/RhNGW0LrRgdCw0YbRltGPINGF0YPQutCwINC/0LXRgNC10LQg0L/QtdGA0YjQvtGOINC80L7QvdC10YLQvtGOXG4gICAgICAgIGhvb2tXcmFwLmNsYXNzTGlzdC5hZGQoXCJob29rLXBvc2l0aW9uLWNhdGNoMVwiKVxuICAgIH1cbiAgICBpZihmcmFtZUNvdW50ZXIgPT09IDMpeyAvLyDQu9C+0LPRltC60LAg0YDRg9GF0YMg0L/QtdGA0YjQvtGXINC80L7QvdC10YLQutC4INC/0ZbRgdC70Y8g0YLQvtCz0L4g0Y/QuiDRl9GXINGF0YPQutC90YPQu9C4XG4gICAgICAgIGNvaW4zLmNsYXNzTGlzdC5hZGQoXCJjb2luLWNhdGNoXCIpXG4gICAgICAgIGhvb2tXcmFwLmNsYXNzTGlzdC5hZGQoXCJob29rLWNhdGNoMS11cFwiKTtcbiAgICAgICAgaG9va0Zhc3RlbmluZy5jbGFzc0xpc3QuYWRkKFwiaG9vay1mYXN0ZXJpbmctY2F0Y2gxLXVwXCIpO1xuICAgIH1cbiAgICBpZihmcmFtZUNvdW50ZXIgPCA3KXsgLy8g0LvQvtCz0ZbQutCwINCw0L3RltC80LDRhtGW0Zcg0YDRg9GF0YMg0YXRg9C60LAg0LTQviDQv9C10YDRiNC+0Zcg0LzQvtC90LXRgtC60LhcbiAgICAgICAgaG9va1dyYXAuY2xhc3NMaXN0LnJlbW92ZShcImhvb2stbW92ZS1ob3Jpem9udGFsXCIpO1xuICAgICAgICBob29rV3JhcC5jbGFzc0xpc3QuYWRkKFwiaG9vay1jYXRjaDEtZG93blwiKTtcbiAgICAgICAgaG9va0Zhc3RlbmluZy5jbGFzc0xpc3QuYWRkKFwiaG9vay1mYXN0ZXJpbmctY2F0Y2gxLWRvd25cIik7XG4gICAgfVxuICAgIGlmKGZyYW1lQ291bnRlciA9PT0gOCl7IC8vINC70L7Qs9GW0LrQsCDQsNC90ZbQvNCw0YbRltGXINGA0YPRhdGDINGF0YPQutCwINC00L4g0LTRgNGD0LPQvtGXINC80L7QvdC10YLQutC4XG4gICAgICAgIGhvb2tXcmFwLmNsYXNzTGlzdC5yZW1vdmUoXCJob29rLW1vdmUtaG9yaXpvbnRhbDJcIik7XG4gICAgICAgIGhvb2tXcmFwLmNsYXNzTGlzdC5hZGQoXCJob29rLXBvc2l0aW9uLWNhdGNoMlwiKVxuICAgICAgICBob29rV3JhcC5jbGFzc0xpc3QuYWRkKFwiaG9vay1jYXRjaDItZG93blwiKTtcbiAgICAgICAgaG9va0Zhc3RlbmluZy5jbGFzc0xpc3QuYWRkKFwiaG9vay1mYXN0ZXJpbmctY2F0Y2gyLWRvd25cIik7XG4gICAgfVxuICAgIGlmKGZyYW1lQ291bnRlciA9PT0gMTApeyAvLyDQu9C+0LPRltC60LAg0YDRg9GF0YMg0LTRgNGD0LPQvtGXINC80L7QvdC10YLQutC4INC/0ZbRgdC70Y8g0YLQvtCz0L4g0Y/QuiDRl9GXINGF0YPQutC90YPQu9C4XG4gICAgICAgIGhvb2tXcmFwLmNsYXNzTGlzdC5hZGQoXCJob29rLWNhdGNoMi11cFwiKTtcbiAgICAgICAgaG9va0Zhc3RlbmluZy5jbGFzc0xpc3QuYWRkKFwiaG9vay1mYXN0ZXJpbmctY2F0Y2gyLXVwXCIpO1xuICAgICAgICBjb2luNC5jbGFzc0xpc3QuYWRkKFwiY29pbi1jYXRjaFwiKVxuICAgIH1cbn0pO1xuXG4iXX0=
