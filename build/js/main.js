"use strict";

var startGameBtn = document.querySelector('.main__game-machine-btn');
var startText = document.querySelector(".start-text");
var hookWrap = document.querySelector('.hook-wrap'); // батьківський елемент в якому знаходиться хук
var hookFastening = document.querySelector('.hook-fastering'); // елемент кріплення хука до gamebody

var gameBody = document.querySelector(".game-body"); // елемент до якого кріпиться хук і лінія на якій він спускається до монеток
var result = document.querySelector(".result"); // таблиця результатів гри
var coins = document.querySelector(".coins"); // батьківський елемент монеток
var gameOver = document.querySelector(".gameOver"); // екран який відображається по закінченню гри

var popupBtn = document.querySelector(".gameOver__info");
var popupWindow = document.querySelector(".popup");
var popupClose = document.querySelector(".popup__close");
var FS = document.querySelector(".FS");
var elemsInsideFS = FS.querySelectorAll("span"); //span елементи в які записується результат FS
var RFB = document.querySelector(".RFB");
var elemsInsideRFB = RFB.querySelectorAll("span"); //span елементи в які записується результат RFB
var EUR = document.querySelector(".EUR");
var elemsInsideEUR = EUR.querySelectorAll("span"); //span елементи в які записується результат EUR
var coin3 = document.querySelector(".coin3"); // монетка яка буде спіймана першою
var coin4 = document.querySelector(".coin4"); // монетка яка буде спіймана другою
var frameCounter = 0; // потрібен для відстежування ключових точок анімації
var animationHandler = false;
// let popupHandler = 0 // відстежує відкритий попап чи ні
startGameBtn.addEventListener("click", function () {
  if (!animationHandler) {
    animationHandler = true;
    startText.style.display = "none";
    hookWrap.classList.add("hook-move-horizontal"); // запуск гри
  }

  if (animationHandler) {
    startGameBtn.classList.add("btn-off");
  }
});

// document.querySelector(".dark-theme").addEventListener('click', () =>{
//     document.querySelector("body").classList.toggle("dark")
// })

coin3.addEventListener("animationend", function () {
  // відстежуємо момент закінчкення анімації першого монетки для запуску циклу анімацій другої монетки
  frameCounter++; //збільшує frameCounter кожного разу коли відбувається анімація першої монетки
  // console.log(`coin ${frameCounter}`)

  //прибираємо стилі анімації першого хука
  hookWrap.classList.remove("hook-catch1-up");
  hookFastening.classList.remove("hook-fastering-catch1-up");
  hookWrap.classList.remove("hook-catch1-down");
  hookFastening.classList.remove("hook-fastering-catch1-down");

  // прибираємо класи відпрацьованої анімації руху та додаємо анімацію зникнення монетки
  coin3.classList.remove("coin-catch");
  coin3.classList.add("coin-disappearance");
  coin3.style.opacity = "0";

  // анімація оновлення FS на таблиці запускається після завершення анімації зникнення першої монетки
  if (frameCounter === 7) {
    elemsInsideFS.forEach(function (item, i) {
      if (i === 0) {
        item.style.opacity = "0";
        item.textContent = '1';
        setTimeout(function () {
          item.style.opacity = "1";
        }, 500);
      }
      if (i === 1) {
        setTimeout(function () {
          item.style.opacity = "0";
          item.textContent = '5';
          setTimeout(function () {
            item.style.opacity = "1";
            hookWrap.classList.add("hook-move-horizontal2"); // ініціюємо анімацію руху до другої монетки
          }, 500);
        }, 200);
      }
    });
  }
});
coin4.addEventListener("animationend", function () {
  frameCounter++; //збільшує frameCounter кожного разу коли відбувається анімація другої монетки
  // console.log(`coin ${frameCounter}`)

  //прибираємо стилі анімації другого хука
  hookWrap.classList.remove("hook-catch2-up");
  hookFastening.classList.remove("hook-fastering-catch2-up");
  hookWrap.classList.remove("hook-catch2-down");
  hookFastening.classList.remove("hook-fastering-catch2-down");

  // прибираємо класи відпрацьованої анімації руху та додаємо анімацію зникнення другої монетки
  coin4.classList.remove("coin-catch");
  coin4.classList.add("coin-disappearance");
  coin4.style.opacity = "0";

  // анімація оновлення RFB та EUR на таблиці запускається після завершення анімації зникнення другої монетки
  if (frameCounter === 14) {
    elemsInsideRFB.forEach(function (item, i) {
      if (i === 0) {
        item.style.opacity = "0";
        item.textContent = '1';
        setTimeout(function () {
          item.style.opacity = "1";
        }, 500);
      }
      if (i === 1) {
        setTimeout(function () {
          item.style.opacity = "0";
          item.textContent = '0';
          setTimeout(function () {
            item.style.opacity = "1";
          }, 500);
        }, 200);
      }
    });
    elemsInsideEUR.forEach(function (item, i) {
      if (i === 0) {
        item.style.opacity = "0";
        item.textContent = '1';
        setTimeout(function () {
          item.style.opacity = "1";
        }, 500);
      }
      if (i === 1) {
        setTimeout(function () {
          item.style.opacity = "0";
          item.textContent = '0';
          setTimeout(function () {
            item.style.opacity = "1";
            // приховуємо елементи гри і відображаємо екран закінчення
            setTimeout(function () {
              gameBody.style.opacity = "0";
              result.style.opacity = "0";
              coins.style.opacity = "0";
              gameOver.style.opacity = "1";
              gameOver.style.zIndex = "10";
              //логіка кнопки відкриття попапу, додається після відображення екрану закінчення гри
              popupBtn.addEventListener("click", function () {
                document.querySelector("body").style.overflowY = "hidden";
                popupWindow.style.opacity = "1";
                popupWindow.style.zIndex = "100";
                // popupHandler++
              });
              //логіка кнопки закриття попапу, додається після відображення екрану закінчення гри
              popupClose.addEventListener("click", function () {
                console.log("close");
                document.querySelector("body").style.overflowY = "visible";
                popupWindow.style.opacity = "0";
                popupWindow.style.zIndex = '-100';
                // popupHandler--
              });
              // document.addEventListener("click", (e) =>{
              //     if(e.target !== popupWindow && popupHandler === 1){
              //         console.log("close")
              //         document.querySelector("body").style.overflowY = "visible"
              //         popupWindow.style.opacity = "0"
              //         popupWindow.style.zIndex = '-100'
              //     }
              // })
            }, 500);
          }, 500);
        }, 200);
      }
    });
  }
});
hookWrap.addEventListener("animationend", function () {
  frameCounter++; // збільшує frameCounter кожного разу коли відбувається анімація хука
  // console.log(frameCounter)
  if (frameCounter === 1) {
    //фіксація хука перед першою монетою
    hookWrap.classList.add("hook-position-catch1");
  }
  if (frameCounter === 3) {
    // логіка руху першої монетки після того як її хукнули
    coin3.classList.add("coin-catch");
    hookWrap.classList.add("hook-catch1-up");
    hookFastening.classList.add("hook-fastering-catch1-up");
  }
  if (frameCounter < 7) {
    // логіка анімації руху хука до першої монетки
    hookWrap.classList.remove("hook-move-horizontal");
    hookWrap.classList.add("hook-catch1-down");
    hookFastening.classList.add("hook-fastering-catch1-down");
  }
  if (frameCounter === 8) {
    // логіка анімації руху хука до другої монетки
    hookWrap.classList.remove("hook-move-horizontal2");
    hookWrap.classList.add("hook-position-catch2");
    hookWrap.classList.add("hook-catch2-down");
    hookFastening.classList.add("hook-fastering-catch2-down");
  }
  if (frameCounter === 10) {
    // логіка руху другої монетки після того як її хукнули
    hookWrap.classList.add("hook-catch2-up");
    hookFastening.classList.add("hook-fastering-catch2-up");
    coin4.classList.add("coin-catch");
  }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsic3RhcnRHYW1lQnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic3RhcnRUZXh0IiwiaG9va1dyYXAiLCJob29rRmFzdGVuaW5nIiwiZ2FtZUJvZHkiLCJyZXN1bHQiLCJjb2lucyIsImdhbWVPdmVyIiwicG9wdXBCdG4iLCJwb3B1cFdpbmRvdyIsInBvcHVwQ2xvc2UiLCJGUyIsImVsZW1zSW5zaWRlRlMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiUkZCIiwiZWxlbXNJbnNpZGVSRkIiLCJFVVIiLCJlbGVtc0luc2lkZUVVUiIsImNvaW4zIiwiY29pbjQiLCJmcmFtZUNvdW50ZXIiLCJhbmltYXRpb25IYW5kbGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0eWxlIiwiZGlzcGxheSIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsIm9wYWNpdHkiLCJmb3JFYWNoIiwiaXRlbSIsImkiLCJ0ZXh0Q29udGVudCIsInNldFRpbWVvdXQiLCJ6SW5kZXgiLCJvdmVyZmxvd1kiLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLFlBQVksR0FBR0MsUUFBUSxDQUFDQyxhQUFhLENBQUMseUJBQXlCLENBQUM7QUFDdEUsSUFBTUMsU0FBUyxHQUFHRixRQUFRLENBQUNDLGFBQWEsQ0FBQyxhQUFhLENBQUM7QUFFdkQsSUFBTUUsUUFBUSxHQUFHSCxRQUFRLENBQUNDLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO0FBQ3ZELElBQU1HLGFBQWEsR0FBR0osUUFBUSxDQUFDQyxhQUFhLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDOztBQUVqRSxJQUFNSSxRQUFRLEdBQUdMLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7QUFDdkQsSUFBTUssTUFBTSxHQUFHTixRQUFRLENBQUNDLGFBQWEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO0FBQ2xELElBQU1NLEtBQUssR0FB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NEIsQ0FBQztFQUM3RDtFQUNBLElBQUdOLFlBQVksS0FBSyxFQUFFLEVBQUM7SUFBRTtJQUNyQmxCLFFBQVEsQ0FBQ3VCLFNBQVMsQ0FBQ0MsR0FBRyxDQUFDLGdCQUFnQixDQUFDO0lBQ3hDdkIsYUFBYSxDQUFDc0IsU0FBUyxDQUFDQyxHQUFHLENBQUMsMEJBQTBCLENBQUM7SUFDdkRQLEtBQUssQ0FBQ00sU0FBUyxDQUFDQyxHQUFHLENBQUMsWUFBWSxDQUFDO0VBQ3JDO0FBQ0osQ0FBQyxDQUFDIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzdGFydEdhbWVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbl9fZ2FtZS1tYWNoaW5lLWJ0bicpO1xuY29uc3Qgc3RhcnRUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdGFydC10ZXh0XCIpO1xuXG5jb25zdCBob29rV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ob29rLXdyYXAnKTsgLy8g0LHQsNGC0YzQutGW0LLRgdGM0LrQuNC5INC10LvQtdC80LXQvdGCINCyINGP0LrQvtC80YMg0LfQvdCw0YXQvtC00LjRgtGM0YHRjyDRhdGD0LpcbmNvbnN0IGhvb2tGYXN0ZW5pbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG9vay1mYXN0ZXJpbmcnKTsgLy8g0LXQu9C10LzQtdC90YIg0LrRgNGW0L/Qu9C10L3QvdGPINGF0YPQutCwINC00L4gZ2FtZWJvZHlcblxuY29uc3QgZ2FtZUJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbWUtYm9keVwiKTsgLy8g0LXQu9C10LzQtdC90YIg0LTQviDRj9C60L7Qs9C+INC60YDRltC/0LjRgtGM0YHRjyDRhdGD0Log0ZYg0LvRltC90ZbRjyDQvdCwINGP0LrRltC5INCy0ZbQvSDRgdC/0YPRgdC60LDRlNGC0YzRgdGPINC00L4g0LzQvtC90LXRgtC+0LpcbmNvbnN0IHJlc3VsdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVzdWx0XCIpOyAvLyDRgtCw0LHQu9C40YbRjyDRgNC10LfRg9C70YzRgtCw0YLRltCyINCz0YDQuFxuY29uc3QgY29pbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvaW5zXCIpIC8vINCx0LDRgtGM0LrRltCy0YHRjNC60LjQuSDQtdC70LXQvNC10L3RgiDQvNC+0L3QtdGC0L7QulxuY29uc3QgZ2FtZU92ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbWVPdmVyXCIpOyAvLyDQtdC60YDQsNC9INGP0LrQuNC5INCy0ZbQtNC+0LHRgNCw0LbQsNGU0YLRjNGB0Y8g0L/QviDQt9Cw0LrRltC90YfQtdC90L3RjiDQs9GA0LhcblxuY29uc3QgcG9wdXBCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbWVPdmVyX19pbmZvXCIpO1xuY29uc3QgcG9wdXBXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwXCIpXG5jb25zdCBwb3B1cENsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIik7XG5cbmNvbnN0IEZTID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5GU1wiKVxuY29uc3QgZWxlbXNJbnNpZGVGUyA9IEZTLnF1ZXJ5U2VsZWN0b3JBbGwoXCJzcGFuXCIpIC8vc3BhbiDQtdC70LXQvNC10L3RgtC4INCyINGP0LrRliDQt9Cw0L/QuNGB0YPRlNGC0YzRgdGPINGA0LXQt9GD0LvRjNGC0LDRgiBGU1xuY29uc3QgUkZCID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5SRkJcIilcbmNvbnN0IGVsZW1zSW5zaWRlUkZCID0gUkZCLnF1ZXJ5U2VsZWN0b3JBbGwoXCJzcGFuXCIpICAvL3NwYW4g0LXQu9C10LzQtdC90YLQuCDQsiDRj9C60ZYg0LfQsNC/0LjRgdGD0ZTRgtGM0YHRjyDRgNC10LfRg9C70YzRgtCw0YIgUkZCXG5jb25zdCBFVVIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkVVUlwiKVxuY29uc3QgZWxlbXNJbnNpZGVFVVIgPSBFVVIucXVlcnlTZWxlY3RvckFsbChcInNwYW5cIikgIC8vc3BhbiDQtdC70LXQvNC10L3RgtC4INCyINGP0LrRliDQt9Cw0L/QuNGB0YPRlNGC0YzRgdGPINGA0LXQt9GD0LvRjNGC0LDRgiBFVVJcbmNvbnN0IGNvaW4zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb2luM1wiKSAvLyDQvNC+0L3QtdGC0LrQsCDRj9C60LAg0LHRg9C00LUg0YHQv9GW0LnQvNCw0L3QsCDQv9C10YDRiNC+0Y5cbmNvbnN0IGNvaW40ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb2luNFwiKSAvLyDQvNC+0L3QtdGC0LrQsCDRj9C60LAg0LHRg9C00LUg0YHQv9GW0LnQvNCw0L3QsCDQtNGA0YPQs9C+0Y5cbmxldCBmcmFtZUNvdW50ZXIgPSAwIC8vINC/0L7RgtGA0ZbQsdC10L0g0LTQu9GPINCy0ZbQtNGB0YLQtdC20YPQstCw0L3QvdGPINC60LvRjtGH0L7QstC40YUg0YLQvtGH0L7QuiDQsNC90ZbQvNCw0YbRltGXXG5sZXQgYW5pbWF0aW9uSGFuZGxlciA9IGZhbHNlXG4vLyBsZXQgcG9wdXBIYW5kbGVyID0gMCAvLyDQstGW0LTRgdGC0LXQttGD0ZQg0LLRltC00LrRgNC40YLQuNC5INC/0L7Qv9Cw0L8g0YfQuCDQvdGWXG5zdGFydEdhbWVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBpZiAoIWFuaW1hdGlvbkhhbmRsZXIpe1xuICAgICAgICBhbmltYXRpb25IYW5kbGVyID0gdHJ1ZVxuICAgICAgICBzdGFydFRleHQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXG4gICAgICAgIGhvb2tXcmFwLmNsYXNzTGlzdC5hZGQoXCJob29rLW1vdmUtaG9yaXpvbnRhbFwiKTsgLy8g0LfQsNC/0YPRgdC6INCz0YDQuFxuICAgIH1cbiAgICBpZihhbmltYXRpb25IYW5kbGVyKXtcbiAgICAgICAgc3RhcnRHYW1lQnRuLmNsYXNzTGlzdC5hZGQoXCJidG4tb2ZmXCIpXG4gICAgfVxuXG5cbn0pO1xuXG4vLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRhcmstdGhlbWVcIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9Pntcbi8vICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKS5jbGFzc0xpc3QudG9nZ2xlKFwiZGFya1wiKVxuLy8gfSlcblxuXG5cbmNvaW4zLmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIiwgKCkgPT57IC8vINCy0ZbQtNGB0YLQtdC20YPRlNC80L4g0LzQvtC80LXQvdGCINC30LDQutGW0L3Rh9C60LXQvdC90Y8g0LDQvdGW0LzQsNGG0ZbRlyDQv9C10YDRiNC+0LPQviDQvNC+0L3QtdGC0LrQuCDQtNC70Y8g0LfQsNC/0YPRgdC60YMg0YbQuNC60LvRgyDQsNC90ZbQvNCw0YbRltC5INC00YDRg9Cz0L7RlyDQvNC+0L3QtdGC0LrQuFxuICAgIGZyYW1lQ291bnRlcisrIC8v0LfQsdGW0LvRjNGI0YPRlCBmcmFtZUNvdW50ZXIg0LrQvtC20L3QvtCz0L4g0YDQsNC30YMg0LrQvtC70Lgg0LLRltC00LHRg9Cy0LDRlNGC0YzRgdGPINCw0L3RltC80LDRhtGW0Y8g0L/QtdGA0YjQvtGXINC80L7QvdC10YLQutC4XG4gICAgLy8gY29uc29sZS5sb2coYGNvaW4gJHtmcmFtZUNvdW50ZXJ9YClcblxuICAgIC8v0L/RgNC40LHQuNGA0LDRlNC80L4g0YHRgtC40LvRliDQsNC90ZbQvNCw0YbRltGXINC/0LXRgNGI0L7Qs9C+INGF0YPQutCwXG4gICAgaG9va1dyYXAuY2xhc3NMaXN0LnJlbW92ZShcImhvb2stY2F0Y2gxLXVwXCIpO1xuICAgIGhvb2tGYXN0ZW5pbmcuY2xhc3NMaXN0LnJlbW92ZShcImhvb2stZmFzdGVyaW5nLWNhdGNoMS11cFwiKTtcbiAgICBob29rV3JhcC5jbGFzc0xpc3QucmVtb3ZlKFwiaG9vay1jYXRjaDEtZG93blwiKTtcbiAgICBob29rRmFzdGVuaW5nLmNsYXNzTGlzdC5yZW1vdmUoXCJob29rLWZhc3RlcmluZy1jYXRjaDEtZG93blwiKTtcblxuICAgIC8vINC/0YDQuNCx0LjRgNCw0ZTQvNC+INC60LvQsNGB0Lgg0LLRltC00L/RgNCw0YbRjNC+0LLQsNC90L7RlyDQsNC90ZbQvNCw0YbRltGXINGA0YPRhdGDINGC0LAg0LTQvtC00LDRlNC80L4g0LDQvdGW0LzQsNGG0ZbRjiDQt9C90LjQutC90LXQvdC90Y8g0LzQvtC90LXRgtC60LhcbiAgICBjb2luMy5jbGFzc0xpc3QucmVtb3ZlKFwiY29pbi1jYXRjaFwiKVxuICAgIGNvaW4zLmNsYXNzTGlzdC5hZGQoXCJjb2luLWRpc2FwcGVhcmFuY2VcIilcbiAgICBjb2luMy5zdHlsZS5vcGFjaXR5ID0gXCIwXCJcblxuICAgIC8vINCw0L3RltC80LDRhtGW0Y8g0L7QvdC+0LLQu9C10L3QvdGPIEZTINC90LAg0YLQsNCx0LvQuNGG0ZYg0LfQsNC/0YPRgdC60LDRlNGC0YzRgdGPINC/0ZbRgdC70Y8g0LfQsNCy0LXRgNGI0LXQvdC90Y8g0LDQvdGW0LzQsNGG0ZbRlyDQt9C90LjQutC90LXQvdC90Y8g0L/QtdGA0YjQvtGXINC80L7QvdC10YLQutC4XG4gICAgaWYoZnJhbWVDb3VudGVyID09PSA3KXtcbiAgICAgICAgZWxlbXNJbnNpZGVGUy5mb3JFYWNoKCAoaXRlbSwgaSkgID0+IHtcbiAgICAgICAgICAgIGlmKCBpID09PSAwKXtcbiAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcbiAgICAgICAgICAgICAgICBpdGVtLnRleHRDb250ZW50ID0gJzEnO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT57aXRlbS5zdHlsZS5vcGFjaXR5ID0gXCIxXCI7fSwgNTAwKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGkgPT09IDEpe1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnRleHRDb250ZW50ID0gJzUnO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zdHlsZS5vcGFjaXR5ID0gXCIxXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBob29rV3JhcC5jbGFzc0xpc3QuYWRkKFwiaG9vay1tb3ZlLWhvcml6b250YWwyXCIpOyAvLyDRltC90ZbRhtGW0Y7RlNC80L4g0LDQvdGW0LzQsNGG0ZbRjiDRgNGD0YXRgyDQtNC+INC00YDRg9Cz0L7RlyDQvNC+0L3QtdGC0LrQuFxuICAgICAgICAgICAgICAgICAgICB9LCA1MDApXG4gICAgICAgICAgICAgICAgfSwgMjAwKVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufSlcbmNvaW40LmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIiwgKCk9PntcbiAgICBmcmFtZUNvdW50ZXIrKyAvL9C30LHRltC70YzRiNGD0ZQgZnJhbWVDb3VudGVyINC60L7QttC90L7Qs9C+INGA0LDQt9GDINC60L7Qu9C4INCy0ZbQtNCx0YPQstCw0ZTRgtGM0YHRjyDQsNC90ZbQvNCw0YbRltGPINC00YDRg9Cz0L7RlyDQvNC+0L3QtdGC0LrQuFxuICAgIC8vIGNvbnNvbGUubG9nKGBjb2luICR7ZnJhbWVDb3VudGVyfWApXG5cbiAgICAvL9C/0YDQuNCx0LjRgNCw0ZTQvNC+INGB0YLQuNC70ZYg0LDQvdGW0LzQsNGG0ZbRlyDQtNGA0YPQs9C+0LPQviDRhdGD0LrQsFxuICAgIGhvb2tXcmFwLmNsYXNzTGlzdC5yZW1vdmUoXCJob29rLWNhdGNoMi11cFwiKTtcbiAgICBob29rRmFzdGVuaW5nLmNsYXNzTGlzdC5yZW1vdmUoXCJob29rLWZhc3RlcmluZy1jYXRjaDItdXBcIik7XG4gICAgaG9va1dyYXAuY2xhc3NMaXN0LnJlbW92ZShcImhvb2stY2F0Y2gyLWRvd25cIik7XG4gICAgaG9va0Zhc3RlbmluZy5jbGFzc0xpc3QucmVtb3ZlKFwiaG9vay1mYXN0ZXJpbmctY2F0Y2gyLWRvd25cIik7XG5cbiAgICAvLyDQv9GA0LjQsdC40YDQsNGU0LzQviDQutC70LDRgdC4INCy0ZbQtNC/0YDQsNGG0YzQvtCy0LDQvdC+0Zcg0LDQvdGW0LzQsNGG0ZbRlyDRgNGD0YXRgyDRgtCwINC00L7QtNCw0ZTQvNC+INCw0L3RltC80LDRhtGW0Y4g0LfQvdC40LrQvdC10L3QvdGPINC00YDRg9Cz0L7RlyDQvNC+0L3QtdGC0LrQuFxuICAgIGNvaW40LmNsYXNzTGlzdC5yZW1vdmUoXCJjb2luLWNhdGNoXCIpXG4gICAgY29pbjQuY2xhc3NMaXN0LmFkZChcImNvaW4tZGlzYXBwZWFyYW5jZVwiKVxuICAgIGNvaW40LnN0eWxlLm9wYWNpdHkgPSBcIjBcIlxuXG4gICAgLy8g0LDQvdGW0LzQsNGG0ZbRjyDQvtC90L7QstC70LXQvdC90Y8gUkZCINGC0LAgRVVSINC90LAg0YLQsNCx0LvQuNGG0ZYg0LfQsNC/0YPRgdC60LDRlNGC0YzRgdGPINC/0ZbRgdC70Y8g0LfQsNCy0LXRgNGI0LXQvdC90Y8g0LDQvdGW0LzQsNGG0ZbRlyDQt9C90LjQutC90LXQvdC90Y8g0LTRgNGD0LPQvtGXINC80L7QvdC10YLQutC4XG4gICAgaWYoZnJhbWVDb3VudGVyID09PSAxNCl7XG4gICAgICAgIGVsZW1zSW5zaWRlUkZCLmZvckVhY2goIChpdGVtLCBpKSAgPT4ge1xuICAgICAgICAgICAgaWYoIGkgPT09IDApe1xuICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuICAgICAgICAgICAgICAgIGl0ZW0udGV4dENvbnRlbnQgPSAnMSc7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PntpdGVtLnN0eWxlLm9wYWNpdHkgPSBcIjFcIjt9LCA1MDApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaSA9PT0gMSl7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PntcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5zdHlsZS5vcGFjaXR5ID0gXCIwXCI7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udGV4dENvbnRlbnQgPSAnMCc7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLm9wYWNpdHkgPSBcIjFcIjtcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwKVxuICAgICAgICAgICAgICAgIH0sIDIwMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgZWxlbXNJbnNpZGVFVVIuZm9yRWFjaCggKGl0ZW0sIGkpICA9PiB7XG4gICAgICAgICAgICBpZiggaSA9PT0gMCl7XG4gICAgICAgICAgICAgICAgaXRlbS5zdHlsZS5vcGFjaXR5ID0gXCIwXCI7XG4gICAgICAgICAgICAgICAgaXRlbS50ZXh0Q29udGVudCA9ICcxJztcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+e2l0ZW0uc3R5bGUub3BhY2l0eSA9IFwiMVwiO30sIDUwMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpID09PSAxKXtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS50ZXh0Q29udGVudCA9ICcwJztcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGUub3BhY2l0eSA9IFwiMVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g0L/RgNC40YXQvtCy0YPRlNC80L4g0LXQu9C10LzQtdC90YLQuCDQs9GA0Lgg0ZYg0LLRltC00L7QsdGA0LDQttCw0ZTQvNC+INC10LrRgNCw0L0g0LfQsNC60ZbQvdGH0LXQvdC90Y9cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUJvZHkuc3R5bGUub3BhY2l0eSA9IFwiMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0eWxlLm9wYWNpdHkgPSBcIjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvaW5zLnN0eWxlLm9wYWNpdHkgPSBcIjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVPdmVyLnN0eWxlLm9wYWNpdHkgPSBcIjFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVPdmVyLnN0eWxlLnpJbmRleCA9IFwiMTBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v0LvQvtCz0ZbQutCwINC60L3QvtC/0LrQuCDQstGW0LTQutGA0LjRgtGC0Y8g0L/QvtC/0LDQv9GDLCDQtNC+0LTQsNGU0YLRjNGB0Y8g0L/RltGB0LvRjyDQstGW0LTQvtCx0YDQsNC20LXQvdC90Y8g0LXQutGA0LDQvdGDINC30LDQutGW0L3Rh9C10L3QvdGPINCz0YDQuFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIikuc3R5bGUub3ZlcmZsb3dZID0gXCJoaWRkZW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cFdpbmRvdy5zdHlsZS5vcGFjaXR5ID0gXCIxXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBXaW5kb3cuc3R5bGUuekluZGV4ID0gXCIxMDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3B1cEhhbmRsZXIrK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/Qu9C+0LPRltC60LAg0LrQvdC+0L/QutC4INC30LDQutGA0LjRgtGC0Y8g0L/QvtC/0LDQv9GDLCDQtNC+0LTQsNGU0YLRjNGB0Y8g0L/RltGB0LvRjyDQstGW0LTQvtCx0YDQsNC20LXQvdC90Y8g0LXQutGA0LDQvdGDINC30LDQutGW0L3Rh9C10L3QvdGPINCz0YDQuFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNsb3NlXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpLnN0eWxlLm92ZXJmbG93WSA9IFwidmlzaWJsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwV2luZG93LnN0eWxlLm9wYWNpdHkgPSBcIjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cFdpbmRvdy5zdHlsZS56SW5kZXggPSAnLTEwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9wdXBIYW5kbGVyLS1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGlmKGUudGFyZ2V0ICE9PSBwb3B1cFdpbmRvdyAmJiBwb3B1cEhhbmRsZXIgPT09IDEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coXCJjbG9zZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIikuc3R5bGUub3ZlcmZsb3dZID0gXCJ2aXNpYmxlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHBvcHVwV2luZG93LnN0eWxlLm9wYWNpdHkgPSBcIjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgcG9wdXBXaW5kb3cuc3R5bGUuekluZGV4ID0gJy0xMDAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKVxuICAgICAgICAgICAgICAgICAgICB9LCA1MDApXG4gICAgICAgICAgICAgICAgfSwgMjAwKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbn0pXG5ob29rV3JhcC5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsICgpID0+IHtcbiAgICBmcmFtZUNvdW50ZXIrKyAvLyDQt9Cx0ZbQu9GM0YjRg9GUIGZyYW1lQ291bnRlciDQutC+0LbQvdC+0LPQviDRgNCw0LfRgyDQutC+0LvQuCDQstGW0LTQsdGD0LLQsNGU0YLRjNGB0Y8g0LDQvdGW0LzQsNGG0ZbRjyDRhdGD0LrQsFxuICAgIC8vIGNvbnNvbGUubG9nKGZyYW1lQ291bnRlcilcbiAgICBpZihmcmFtZUNvdW50ZXIgPT09IDEpeyAvL9GE0ZbQutGB0LDRhtGW0Y8g0YXRg9C60LAg0L/QtdGA0LXQtCDQv9C10YDRiNC+0Y4g0LzQvtC90LXRgtC+0Y5cbiAgICAgICAgaG9va1dyYXAuY2xhc3NMaXN0LmFkZChcImhvb2stcG9zaXRpb24tY2F0Y2gxXCIpXG4gICAgfVxuICAgIGlmKGZyYW1lQ291bnRlciA9PT0gMyl7IC8vINC70L7Qs9GW0LrQsCDRgNGD0YXRgyDQv9C10YDRiNC+0Zcg0LzQvtC90LXRgtC60Lgg0L/RltGB0LvRjyDRgtC+0LPQviDRj9C6INGX0Zcg0YXRg9C60L3Rg9C70LhcbiAgICAgICAgY29pbjMuY2xhc3NMaXN0LmFkZChcImNvaW4tY2F0Y2hcIilcbiAgICAgICAgaG9va1dyYXAuY2xhc3NMaXN0LmFkZChcImhvb2stY2F0Y2gxLXVwXCIpO1xuICAgICAgICBob29rRmFzdGVuaW5nLmNsYXNzTGlzdC5hZGQoXCJob29rLWZhc3RlcmluZy1jYXRjaDEtdXBcIik7XG4gICAgfVxuICAgIGlmKGZyYW1lQ291bnRlciA8IDcpeyAvLyDQu9C+0LPRltC60LAg0LDQvdGW0LzQsNGG0ZbRlyDRgNGD0YXRgyDRhdGD0LrQsCDQtNC+INC/0LXRgNGI0L7RlyDQvNC+0L3QtdGC0LrQuFxuICAgICAgICBob29rV3JhcC5jbGFzc0xpc3QucmVtb3ZlKFwiaG9vay1tb3ZlLWhvcml6b250YWxcIik7XG4gICAgICAgIGhvb2tXcmFwLmNsYXNzTGlzdC5hZGQoXCJob29rLWNhdGNoMS1kb3duXCIpO1xuICAgICAgICBob29rRmFzdGVuaW5nLmNsYXNzTGlzdC5hZGQoXCJob29rLWZhc3RlcmluZy1jYXRjaDEtZG93blwiKTtcbiAgICB9XG4gICAgaWYoZnJhbWVDb3VudGVyID09PSA4KXsgLy8g0LvQvtCz0ZbQutCwINCw0L3RltC80LDRhtGW0Zcg0YDRg9GF0YMg0YXRg9C60LAg0LTQviDQtNGA0YPQs9C+0Zcg0LzQvtC90LXRgtC60LhcbiAgICAgICAgaG9va1dyYXAuY2xhc3NMaXN0LnJlbW92ZShcImhvb2stbW92ZS1ob3Jpem9udGFsMlwiKTtcbiAgICAgICAgaG9va1dyYXAuY2xhc3NMaXN0LmFkZChcImhvb2stcG9zaXRpb24tY2F0Y2gyXCIpXG4gICAgICAgIGhvb2tXcmFwLmNsYXNzTGlzdC5hZGQoXCJob29rLWNhdGNoMi1kb3duXCIpO1xuICAgICAgICBob29rRmFzdGVuaW5nLmNsYXNzTGlzdC5hZGQoXCJob29rLWZhc3RlcmluZy1jYXRjaDItZG93blwiKTtcbiAgICB9XG4gICAgaWYoZnJhbWVDb3VudGVyID09PSAxMCl7IC8vINC70L7Qs9GW0LrQsCDRgNGD0YXRgyDQtNGA0YPQs9C+0Zcg0LzQvtC90LXRgtC60Lgg0L/RltGB0LvRjyDRgtC+0LPQviDRj9C6INGX0Zcg0YXRg9C60L3Rg9C70LhcbiAgICAgICAgaG9va1dyYXAuY2xhc3NMaXN0LmFkZChcImhvb2stY2F0Y2gyLXVwXCIpO1xuICAgICAgICBob29rRmFzdGVuaW5nLmNsYXNzTGlzdC5hZGQoXCJob29rLWZhc3RlcmluZy1jYXRjaDItdXBcIik7XG4gICAgICAgIGNvaW40LmNsYXNzTGlzdC5hZGQoXCJjb2luLWNhdGNoXCIpXG4gICAgfVxufSk7Il19
